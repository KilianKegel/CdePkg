<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<style>
.AlignLeft { text-align: left; }
.AlignCenter { text-align: center; }
.AlignRight { text-align: right; }
body { font-family: sans-serif; font-size: 11pt; }
img.AutoScale { max-width: 100%; max-height: 100%; }
td { vertical-align: top; padding-left: 4px; padding-right: 4px; }

tr.SectionGap td { font-size: 4px; border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionAll td { border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionBegin td { border-left: none; border-top: none; border-right: 1px solid Black; }
tr.SectionEnd td { border-left: none; border-top: none; border-bottom: 1px solid Black; border-right: 1px solid Black; }
tr.SectionMiddle td { border-left: none; border-top: none; border-right: 1px solid Black; }
tr.SubsectionAll td { border-left: none; border-top: none; border-bottom: 1px solid Gray; border-right: 1px solid Black; }
tr.SubsectionEnd td { border-left: none; border-top: none; border-bottom: 1px solid Gray; border-right: 1px solid Black; }
table.fc { border-top: 1px solid Black; border-left: 1px solid Black; width: 100%; font-family: monospace; font-size: 10pt; }
td.TextItemInsigMod { color: #000000; background-color: #EEEEFF; }
td.TextItemInsigOrphan { color: #000000; background-color: #FAEEFF; }
td.TextItemNum { color: #696969; background-color: #F0F0F0; }
td.TextItemSame { color: #000000; background-color: #FFFFFF; }
td.TextItemSigMod { color: #000000; background-color: #FFE3E3; }
td.TextItemSigOrphan { color: #000000; background-color: #F1E3FF; }
.TextSegInsigDiff { color: #0000FF; }
.TextSegReplacedDiff { color: #0000FF; font-style: italic; }
.TextSegSigDiff { color: #FF0000; }
td.TextItemInsigAdd { color: #000000; background-color: #EEEEFF; }
td.TextItemInsigDel { color: #000000; background-color: #EEEEFF; text-decoration: line-through; }
td.TextItemSigAdd { color: #000000; background-color: #FFE3E3; }
td.TextItemSigDel { color: #000000; background-color: #FFE3E3; text-decoration: line-through; }
.TextSegElementKeyword { font-weight: bold; }
.TextSegElementIdentifier { }
.TextSegElementNumber { color: #2E9269; }
.TextSegElementString { color: #3A7726; }
.TextSegElementCompiler_32Directive { color: #681717; }
.TextSegElementComment { color: #786A41; }
.TextSegElementOperator { }
</style>
<title>Text Compare</title>
</head>
<body>
Text Compare<br>
Produced: 2020-02-12 05:44:36 AM<br>
&nbsp; &nbsp;
<br>
Mode:&nbsp; All, With Context &nbsp;
<br>
Left file: Z:\EDK2020-MinnowBoard.001\overrides\NetworkPkg\Ip4Dxe\Ip4Driver.c &nbsp;
<br>
Right file: Z:\EDK2020-MinnowBoard.001\edk2\NetworkPkg\Ip4Dxe\Ip4Driver.c &nbsp;
<br>
<table class="fc" cellspacing="0" cellpadding="0">
<tbody><tr class="SectionBegin">
<td class="TextItemSame"><span class="TextSegElementComment">/** @file</span></td>
<td class="AlignCenter">=</td>
<td class="TextItemSame"><span class="TextSegElementComment">/** @file</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The driver binding and service binding protocol for IP4 driver.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The driver binding and service binding protocol for IP4 driver.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">Copyright (c) 2005 - 2019, Intel Corporation. All rights reserved.&lt;BR&gt;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">Copyright (c) 2005 - 2019, Intel Corporation. All rights reserved.&lt;BR&gt;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">(C) Copyright 2015 Hewlett-Packard Development Company, L.P.&lt;BR&gt;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">(C) Copyright 2015 Hewlett-Packard Development Company, L.P.&lt;BR&gt;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">SPDX-License-Identifier: BSD-2-Clause-Patent</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">SPDX-License-Identifier: BSD-2-Clause-Patent</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame"><span class="TextSegElementCompiler_32Directive">#include</span> <span class="TextSegElementString">"Ip4Impl.h"</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementCompiler_32Directive">#include</span> <span class="TextSegElementString">"Ip4Impl.h"</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">stdio</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; </span><span class="TextSegInsigDiff">// include if required</span></td>
<td class="AlignCenter">+-</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">stdlib</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp;&nbsp; </span><span class="TextSegInsigDiff">// include if required</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">string</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp;&nbsp; </span><span class="TextSegInsigDiff">// include if required</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">ctype</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; </span><span class="TextSegInsigDiff">// include if required</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">wctype</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp;&nbsp; </span><span class="TextSegInsigDiff">// include if required</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegSigDiff">#include</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">&lt;</span><span class="TextSegSigDiff">CDE</span><span class="TextSegSigDiff">.</span><span class="TextSegSigDiff">h</span><span class="TextSegSigDiff">&gt;</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegInsigDiff">// include to have CDE base definitions, e.g. CDEMOFINE()</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSigMod"><span class="TextSegSigDiff">extern</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">char</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">*</span><span class="TextSegSigDiff">strefierror</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">EFI_STATUS</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">errcode</span><span class="TextSegSigDiff">);</span><span class="TextSegInsigDiff">&nbsp;&nbsp; </span><span class="TextSegInsigDiff">// declare ANSI C strerror() counterpart for UEFI strefierror()</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">=</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span> <span class="TextSegElementIdentifier">gIp4DriverBinding</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span> <span class="TextSegElementIdentifier">gIp4DriverBinding</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingSupported</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingSupported</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingStart</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingStart</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingStop</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4DriverBindingStop</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementNumber">0xa</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementNumber">0xa</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">};</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">};</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">BOOLEAN</span>&nbsp; <span class="TextSegElementIdentifier">mIpSec2Installed</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">BOOLEAN</span>&nbsp; <span class="TextSegElementIdentifier">mIpSec2Installed</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; Callback function for IpSec2 Protocol install.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; Callback function for IpSec2 Protocol install.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; @param[in] Event&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Event whose notification function is being invoked</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; @param[in] Event&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Event whose notification function is being invoked</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; @param[in] Context&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Pointer to the notification function's context</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; @param[in] Context&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Pointer to the notification function's context</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">VOID</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">VOID</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">IpSec2InstalledCallback</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">IpSec2InstalledCallback</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_EVENT</span>&nbsp; <span class="TextSegElementIdentifier">Event</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_EVENT</span>&nbsp; <span class="TextSegElementIdentifier">Event</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Context</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Context</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test if protocol was even found.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test if protocol was even found.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Notification function will be called at least once.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Notification function will be called at least once.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">LocateProtocol</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">gEfiIpSec2ProtocolGuid</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)&amp;</span><span class="TextSegElementIdentifier">mIpSec</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">LocateProtocol</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">gEfiIpSec2ProtocolGuid</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)&amp;</span><span class="TextSegElementIdentifier">mIpSec</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">mIpSec</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">mIpSec</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// Close the event so it does not get called again.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// Close the event so it does not get called again.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Event</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Event</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">mIpSec2Installed</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">mIpSec2Installed</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; This is the declaration of an EFI image entry point. This entry point is</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; This is the declaration of an EFI image entry point. This entry point is</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the same for UEFI Applications, UEFI OS Loaders, and UEFI Drivers including</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the same for UEFI Applications, UEFI OS Loaders, and UEFI Drivers including</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; both device drivers and bus drivers.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; both device drivers and bus drivers.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The entry point for IP4 driver which install the driver</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The entry point for IP4 driver which install the driver</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; binding and component name protocol on its image.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; binding and component name protocol on its image.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ImageHandle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The firmware allocated handle for the UEFI image.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ImageHandle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The firmware allocated handle for the UEFI image.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; SystemTable&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; A pointer to the EFI System Table.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; SystemTable&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; A pointer to the EFI System Table.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The operation completed successfully.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The operation completed successfully.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp; The request could not be completed due to a lack of resources.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp; The request could not be completed due to a lack of resources.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//EFI_STATUS</span></td>
<td class="AlignCenter">&lt;&gt;</td>
<td class="TextItemSigMod"><span class="TextSegSigDiff">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSigMod"><span class="TextSegSigDiff">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//Ip4Driv</span><span class="TextSegInsigDiff">erEntryPoint (</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSigMod"><span class="TextSegSigDiff">Ip4DriverEntry</span><span class="TextSegSigDiff">Point</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//&nbsp; IN EFI_HANDLE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ImageHandle,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">IN</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">EFI_HANDLE</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="TextSegSigDiff">ImageHandle</span><span class="TextSegSigDiff">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//&nbsp; IN EFI_SYSTEM_TABLE&nbsp; &nbsp; &nbsp;&nbsp; *Sys</span><span class="TextSegInsigDiff">temTable</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">IN</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">EFI_SYSTEM_TABLE</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="TextSegSigDiff">*</span><span class="TextSegSigDiff">SystemTable</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">//&nbsp; )</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">)</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSigMod"><span class="TextSegSigDiff">INT32</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">main</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">INT32</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">Argc</span><span class="TextSegSigDiff">,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">CHAR8</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">**</span><span class="TextSegSigDiff">Argv</span><span class="TextSegSigDiff">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">=</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Registration</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Registration</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">EFI_HANDLE</span><span class="TextSegInsigDiff">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="TextSegSigDiff">ImageHandle</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">void</span><span class="TextSegSigDiff">*)</span><span class="TextSegSigDiff">Argv</span><span class="TextSegSigDiff">[-</span><span class="TextSegSigDiff">2</span><span class="TextSegSigDiff">];</span></td>
<td class="AlignCenter">+-</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">EFI_SYSTEM_TABLE</span><span class="TextSegSigDiff">*</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">SystemTable</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">=</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">void</span><span class="TextSegSigDiff">*)</span><span class="TextSegSigDiff">Argv</span><span class="TextSegSigDiff">[-</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">];</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegInsigDiff">/*</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod"><span class="TextSegInsigDiff">&nbsp;&nbsp;
 &nbsp; &nbsp;&nbsp; From now on all ANSI C functions listed in 
https://github.com/tianocore/edk2-staging/blob/CdePkg/implemented.md#validation-status</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod"><span class="TextSegInsigDiff">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; are available to the driver, additionally to the ordinary UEFI API and library interface</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemInsigMod"><span class="TextSegInsigDiff">&nbsp; */</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">CDEMOFINE</span><span class="TextSegInsigDiff">/*MOduleFIleliNE*/</span><span class="TextSegSigDiff">((</span><span class="TextSegSigDiff">MFNINF</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">"##################################################################\n"</span><span class="TextSegSigDiff">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">CDEMOFINE</span><span class="TextSegInsigDiff">/*MOduleFIleliNE*/</span><span class="TextSegSigDiff">((</span><span class="TextSegSigDiff">MFNINF</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">"########################## Welcome to the CdePkg Library for UEFI POST drivers\n"</span><span class="TextSegSigDiff">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">CDEMOFINE</span><span class="TextSegInsigDiff">/*MOduleFIleliNE*/</span><span class="TextSegSigDiff">((</span><span class="TextSegSigDiff">MFNINF</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">"##################################################################\n"</span><span class="TextSegSigDiff">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemInsigMod"><span class="TextSegInsigDiff">&nbsp;&nbsp;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">=</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EfiCreateProtocolNotifyEvent</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EfiCreateProtocolNotifyEvent</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIpSec2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIpSec2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSec2InstalledCallback</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSec2InstalledCallback</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Registration</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Registration</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EfiLibInstallDriverBindingComponentName2</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EfiLibInstallDriverBindingComponentName2</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">SystemTable</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">SystemTable</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4ComponentName</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4ComponentName</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4ComponentName2</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gIp4ComponentName2</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Test to see if this driver supports ControllerHandle. This service</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Test to see if this driver supports ControllerHandle. This service</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; is called by the EFI boot service ConnectController(). In</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; is called by the EFI boot service ConnectController(). In</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; order to make drivers as small as possible, there are a few calling</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; order to make drivers as small as possible, there are a few calling</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; restrictions for this service. ConnectController() must</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; restrictions for this service. ConnectController() must</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; follow these calling restrictions. If any other agent wishes to call</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; follow these calling restrictions. If any other agent wishes to call</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Supported() it must also follow these calling restrictions.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Supported() it must also follow these calling restrictions.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Protocol instance pointer.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Protocol instance pointer.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; &nbsp; Handle of device to test</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; &nbsp; Handle of device to test</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; RemainingDevicePath Optional parameter use to pick a specific child</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; RemainingDevicePath Optional parameter use to pick a specific child</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; device to start.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; device to start.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver supports this device</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver supports this device</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ALREADY_STARTED This driver is already running on this device</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ALREADY_STARTED This driver is already running on this device</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver does not support this device</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver does not support this device</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingSupported</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingSupported</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DEVICE_PATH_PROTOCOL</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">RemainingDevicePath</span> <span class="TextSegElementIdentifier">OPTIONAL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DEVICE_PATH_PROTOCOL</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">RemainingDevicePath</span> <span class="TextSegElementIdentifier">OPTIONAL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the MNP service binding Protocol</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the MNP service binding Protocol</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the Arp service binding Protocol</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the Arp service binding Protocol</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Clean up a IP4 service binding instance. It will release all</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Clean up a IP4 service binding instance. It will release all</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the resource allocated by the instance. The instance may be</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the resource allocated by the instance. The instance may be</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; partly initialized, or partly destroyed. If a resource is</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; partly initialized, or partly destroyed. If a resource is</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; destroyed, it is marked as that in case the destroy failed and</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; destroyed, it is marked as that in case the destroy failed and</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; being called again later.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; being called again later.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; IpSb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The IP4 service binding instance to clean up</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; IpSb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The IP4 service binding instance to clean up</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The resource used by the instance are cleaned up</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The resource used by the instance are cleaned up</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Failed to clean up some of the resources.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Failed to clean up some of the resources.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Create a new IP4 driver service binding private instance.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Create a new IP4 driver service binding private instance.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; Controller&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The controller that has MNP service binding</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; Controller&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The controller that has MNP service binding</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; installed</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; installed</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ImageHandle&nbsp; &nbsp; &nbsp; &nbsp; The IP4 driver's image handle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ImageHandle&nbsp; &nbsp; &nbsp; &nbsp; The IP4 driver's image handle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; Service&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The variable to receive the newly created IP4</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; Service&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The variable to receive the newly created IP4</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; service.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; service.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp;&nbsp; Failed to allocate some resource</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp;&nbsp; Failed to allocate some resource</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new IP4 service binding private is created.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new IP4 service binding private is created.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Other error occurs.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Other error occurs.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CreateService</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CreateService</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OUT</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">**</span><span class="TextSegElementIdentifier">Service</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OUT</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">**</span><span class="TextSegElementIdentifier">Service</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ASSERT</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ASSERT</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// allocate a service private data then initialize all the filed to</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// allocate a service private data then initialize all the filed to</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// empty resources, so if any thing goes wrong when allocating</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// empty resources, so if any thing goes wrong when allocating</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// resources, Ip4CleanService can be called to clean it up.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// resources, Ip4CleanService can be called to clean it up.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">AllocateZeroPool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_SERVICE</span><span class="TextSegElementOperator">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">AllocateZeroPool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_SERVICE</span><span class="TextSegElementOperator">));</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Signature</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_SIGNATURE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Signature</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_SIGNATURE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">CreateChild</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceBindingCreateChild</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">CreateChild</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceBindingCreateChild</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DestroyChild</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceBindingDestroyChild</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DestroyChild</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceBindingDestroyChild</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_UNSTARTED</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_UNSTARTED</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4InitAssembleTable</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Assemble</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4InitAssembleTable</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Assemble</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">IgmpCtrl</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Igmpv1QuerySeen</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">IgmpCtrl</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Igmpv1QuerySeen</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">IgmpCtrl</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Groups</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InitializeListHead</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">IgmpCtrl</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Groups</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ReceivedQueueTimeoutValue</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ReceivedQueueTimeoutValue</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">TransmitQueueTimeoutValue</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">TransmitQueueTimeoutValue</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ProtocolTypeFilter</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_ETHER_PROTO</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ProtocolTypeFilter</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_ETHER_PROTO</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableUnicastReceive</span>&nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableUnicastReceive</span>&nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableMulticastReceive</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableMulticastReceive</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableBroadcastReceive</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableBroadcastReceive</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnablePromiscuousReceive</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnablePromiscuousReceive</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">FlushQueuesOnReset</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">FlushQueuesOnReset</span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableReceiveTimestamps</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">EnableReceiveTimestamps</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DisableBackgroundPolling</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpConfigData</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DisableBackgroundPolling</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ZeroMem</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_SIMPLE_NETWORK_MODE</span><span class="TextSegElementOperator">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ZeroMem</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_SIMPLE_NETWORK_MODE</span><span class="TextSegElementOperator">));</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Reconfig</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Reconfig</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MediaPresent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MediaPresent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Create various resources. First create the route table, timer</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Create various resources. First create the route table, timer</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// event, ReconfigEvent and MNP child. IGMP, interface's initialization depend</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// event, ReconfigEvent and MNP child. IGMP, interface's initialization depend</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// on the MNP child.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// on the MNP child.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateRouteTable</span> <span class="TextSegElementOperator">();</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateRouteTable</span> <span class="TextSegElementOperator">();</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span> <span class="TextSegElementOperator">|</span> <span class="TextSegElementIdentifier">EVT_TIMER</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span> <span class="TextSegElementOperator">|</span> <span class="TextSegElementIdentifier">EVT_TIMER</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4TimerTicking</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4TimerTicking</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span> <span class="TextSegElementOperator">|</span> <span class="TextSegElementIdentifier">EVT_TIMER</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span> <span class="TextSegElementOperator">|</span> <span class="TextSegElementIdentifier">EVT_TIMER</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4TimerReconfigChecking</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4TimerReconfigChecking</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CreateEvent</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EVT_NOTIFY_SIGNAL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_NOTIFY</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">TPL_NOTIFY</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4AutoReconfigCallBack</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4AutoReconfigCallBack</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibCreateServiceChild</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibCreateServiceChild</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_BY_DRIVER</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_BY_DRIVER</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceConfigMnp</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ServiceConfigMnp</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">GetModeData</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">GetModeData</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4InitIgmp</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4InitIgmp</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetMacString</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetMacString</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">ImageHandle</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InsertHeadList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InsertHeadList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ZeroMem</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_CONFIG2_INSTANCE</span><span class="TextSegElementOperator">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ZeroMem</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_CONFIG2_INSTANCE</span><span class="TextSegElementOperator">));</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2InitInstance</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2InitInstance</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">-</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_HEAD</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SnpMode</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">-</span> <span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_HEAD</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NetLibGetVlanId</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NetLibGetVlanId</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// This is a VLAN device, reduce MTU by VLAN tag length</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// This is a VLAN device, reduce MTU by VLAN tag length</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">-=</span> <span class="TextSegElementIdentifier">NET_VLAN_TAG_LEN</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span> <span class="TextSegElementOperator">-=</span> <span class="TextSegElementIdentifier">NET_VLAN_TAG_LEN</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OldMaxPacketSize</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OldMaxPacketSize</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MaxPacketSize</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Clean up a IP4 service binding instance. It will release all</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Clean up a IP4 service binding instance. It will release all</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the resource allocated by the instance. The instance may be</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; the resource allocated by the instance. The instance may be</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; partly initialized, or partly destroyed. If a resource is</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; partly initialized, or partly destroyed. If a resource is</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; destroyed, it is marked as that in case the destroy failed and</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; destroyed, it is marked as that in case the destroy failed and</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; being called again later.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; being called again later.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; IpSb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The IP4 service binding instance to clean up</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; IpSb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The IP4 service binding instance to clean up</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The resource used by the instance are cleaned up</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The resource used by the instance are cleaned up</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Failed to clean up some of the resources.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Failed to clean up some of the resources.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_DESTROY</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_DESTROY</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerCancel</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerCancel</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerCancel</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerCancel</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeRouteTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeRouteTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanAssembleTable</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Assemble</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanAssembleTable</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Assemble</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NetLibDestroyServiceChild</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NetLibDestroyServiceChild</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigEvent</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Reconfig</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Reconfig</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Config2CleanInstance</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Config2CleanInstance</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Callback function which provided by user to remove one node in NetDestroyLinkList process.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Callback function which provided by user to remove one node in NetDestroyLinkList process.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; &nbsp; Entry&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The entry to be removed.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; &nbsp; Entry&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The entry to be removed.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; 
@param[in]&nbsp; &nbsp; Context&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Pointer
 to the callback context corresponds to the Context in 
NetDestroyLinkList.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; 
@param[in]&nbsp; &nbsp; Context&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Pointer
 to the callback context corresponds to the Context in 
NetDestroyLinkList.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The entry has been removed successfully.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The entry has been removed successfully.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval Others&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Fail to remove the entry.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval Others&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Fail to remove the entry.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DestroyChildEntryInHandleBuffer</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DestroyChildEntryInHandleBuffer</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">LIST_ENTRY</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Entry</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">LIST_ENTRY</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Entry</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Context</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Context</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Entry</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementIdentifier">Context</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Entry</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementIdentifier">Context</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NET_LIST_USER_STRUCT_S</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Entry</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IP4_PROTOCOL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IP4_PROTOCOL_SIGNATURE</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NET_LIST_USER_STRUCT_S</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Entry</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IP4_PROTOCOL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IP4_PROTOCOL_SIGNATURE</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ServiceBinding</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ServiceBinding</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ChildHandleBuffer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ChildHandleBuffer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span> <span class="TextSegElementOperator">*)</span> <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">)-&gt;</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(!</span><span class="TextSegElementIdentifier">NetIsInHandleBuffer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(!</span><span class="TextSegElementIdentifier">NetIsInHandleBuffer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DestroyChild</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DestroyChild</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Start this driver on ControllerHandle. This service is called by the</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Start this driver on ControllerHandle. This service is called by the</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; EFI boot service ConnectController(). In order to make</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; EFI boot service ConnectController(). In order to make</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; drivers as small as possible, there are a few calling restrictions for</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; drivers as small as possible, there are a few calling restrictions for</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; this service. ConnectController() must follow these</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; this service. ConnectController() must follow these</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; calling restrictions. If any other agent wishes to call Start() it</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; calling restrictions. If any other agent wishes to call Start() it</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; must also follow these calling restrictions.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; must also follow these calling restrictions.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Protocol instance pointer.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Protocol instance pointer.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; &nbsp;&nbsp; Handle of device to bind driver to</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; &nbsp;&nbsp; Handle of device to bind driver to</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; RemainingDevicePath&nbsp; Optional parameter use to pick a specific child</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; RemainingDevicePath&nbsp; Optional parameter use to pick a specific child</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device to start.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device to start.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This driver is added to ControllerHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This driver is added to ControllerHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ALREADY_STARTED&nbsp; This driver is already running on ControllerHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ALREADY_STARTED&nbsp; This driver is already running on ControllerHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This driver does not support this device</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This driver does not support this device</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingStart</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingStart</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DEVICE_PATH_PROTOCOL</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">RemainingDevicePath</span> <span class="TextSegElementIdentifier">OPTIONAL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_DEVICE_PATH_PROTOCOL</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">RemainingDevicePath</span> <span class="TextSegElementIdentifier">OPTIONAL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_IP4_CONFIG2_PROTOCOL</span>&nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_IP4_CONFIG2_PROTOCOL</span>&nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_CONFIG2_DATA_ITEM</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_CONFIG2_DATA_ITEM</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">DataItem</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">DataItem</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">CDEMOFINE</span><span class="TextSegSigDiff">((</span><span class="TextSegSigDiff">MFNINF</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">"Hello world\n"</span><span class="TextSegSigDiff">));</span></td>
<td class="AlignCenter">+-</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">printf</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">"Welcome, to BDS phase...\n"</span><span class="TextSegSigDiff">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">=</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the Ip4 service binding protocol</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Test for the Ip4 service binding protocol</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_TEST_PROTOCOL</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionAll">
<td class="TextItemSigMod"><span class="TextSegInsigDiff">&nbsp; </span><span class="TextSegSigDiff">CDEMOFINE</span><span class="TextSegSigDiff">((</span><span class="TextSegSigDiff">MFNINF</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">1</span><span class="TextSegSigDiff">)</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">"Status == %016X, %s\n"</span><span class="TextSegSigDiff">,</span><span class="TextSegInsigDiff"> </span><span class="TextSegSigDiff">Status</span><span class="TextSegSigDiff">,</span><span class="TextSegSigDiff">strefierror</span><span class="TextSegSigDiff">(</span><span class="TextSegSigDiff">Status</span><span class="TextSegSigDiff">)));</span></td>
<td class="AlignCenter">+-</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionBegin">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">=</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_ALREADY_STARTED</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_ALREADY_STARTED</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ASSERT</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">ASSERT</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ip4Config2</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ip4Config2</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Install the Ip4ServiceBinding Protocol onto ControlerHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Install the Ip4ServiceBinding Protocol onto ControlerHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">FREE_SERVICE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">FREE_SERVICE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Read the config data from NV variable again.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Read the config data from NV variable again.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// The default data can be changed by other drivers.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// The default data can be changed by other drivers.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2ReadConfigData</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2ReadConfigData</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MacString</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Consume the installed EFI_IP4_CONFIG2_PROTOCOL to set the default data items.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Consume the installed EFI_IP4_CONFIG2_PROTOCOL to set the default data items.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">for</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypePolicy</span><span class="TextSegElementOperator">;</span> <span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">&lt;</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypeMaximum</span><span class="TextSegElementOperator">;</span> <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">++)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">for</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypePolicy</span><span class="TextSegElementOperator">;</span> <span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">&lt;</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypeMaximum</span><span class="TextSegElementOperator">;</span> <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">++)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">[</span><span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">];</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">[</span><span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">];</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ptr</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ptr</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetData</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetData</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Index</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DataSize</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DataSize</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ptr</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ptr</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span><span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span><span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypePolicy</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementOperator">(*(</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Policy</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">Ip4Config2PolicyDhcp</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Index</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">Ip4Config2DataTypePolicy</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementOperator">(*(</span><span class="TextSegElementIdentifier">DataItem</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Data</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Policy</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">Ip4Config2PolicyDhcp</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">break</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">break</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ready to go: start the receiving and timer.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ready to go: start the receiving and timer.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4Config2SetPolicy maybe call Ip4ReceiveFrame() to set the default interface's RecvRequest first after</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4Config2SetPolicy maybe call Ip4ReceiveFrame() to set the default interface's RecvRequest first after</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4Config2 instance is initialized. So, EFI_ALREADY_STARTED is the allowed return status.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4Config2 instance is initialized. So, EFI_ALREADY_STARTED is the allowed return status.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ReceiveFrame</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Ip4AccpetFrame</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4ReceiveFrame</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Ip4AccpetFrame</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">EFI_ALREADY_STARTED</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">EFI_ALREADY_STARTED</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerPeriodic</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TICKS_PER_SECOND</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Timer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerPeriodic</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TICKS_PER_SECOND</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerPeriodic</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">500</span> <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">TICKS_PER_MS</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">SetTimer</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ReconfigCheckTimer</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">TimerPeriodic</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementNumber">500</span> <span class="TextSegElementOperator">*</span> <span class="TextSegElementIdentifier">TICKS_PER_MS</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Initialize the IP4 ID</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Initialize the IP4 ID</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">mIp4Id</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">UINT16</span><span class="TextSegElementOperator">)</span><span class="TextSegElementIdentifier">NET_RANDOM</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NetRandomInitSeed</span> <span class="TextSegElementOperator">());</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">mIp4Id</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">UINT16</span><span class="TextSegElementOperator">)</span><span class="TextSegElementIdentifier">NET_RANDOM</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NetRandomInitSeed</span> <span class="TextSegElementOperator">());</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">UNINSTALL_PROTOCOL</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4Cfg2</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">FREE_SERVICE</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">FREE_SERVICE</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Stop this driver on ControllerHandle. This service is called by the</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Stop this driver on ControllerHandle. This service is called by the</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; EFI boot service DisconnectController(). In order to</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; EFI boot service DisconnectController(). In order to</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; make drivers as small as possible, there are a few calling</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; make drivers as small as possible, there are a few calling</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; restrictions for this service. DisconnectController()</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; restrictions for this service. DisconnectController()</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; must follow these calling restrictions. If any other agent wishes</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; must follow these calling restrictions. If any other agent wishes</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; to call Stop() it must also follow these calling restrictions.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; to call Stop() it must also follow these calling restrictions.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Protocol instance pointer.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Protocol instance pointer.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; Handle of device to stop driver on</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ControllerHandle&nbsp; Handle of device to stop driver on</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; NumberOfChildren&nbsp; Number of Handles in ChildHandleBuffer. If number</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; NumberOfChildren&nbsp; Number of Handles in ChildHandleBuffer. If number</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; of children is zero stop the entire 
bus driver.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; of children is zero stop the entire 
bus driver.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ChildHandleBuffer List of Child Handles to Stop.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param[in]&nbsp; ChildHandleBuffer List of Child Handles to Stop.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver is removed ControllerHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCESS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver is removed ControllerHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver was not removed from this device</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This driver was not removed from this device</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingStop</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4DriverBindingStop</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_DRIVER_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">UINTN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span>&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">INTN</span>&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">INTN</span>&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">LIST_ENTRY</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">List</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">LIST_ENTRY</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">List</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span>&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_DESTROY_CHILD_IN_HANDLE_BUF_CONTEXT</span>&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_INTERFACE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_INTERFACE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_ROUTE_TABLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">RouteTable</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_ROUTE_TABLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">RouteTable</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">BOOLEAN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">BOOLEAN</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiDhcp4ProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetLibGetNicHandle</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiDhcp4ProtocolGuid</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NicHandle</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IsDhcp4</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_GET_PROTOCOL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_GET_PROTOCOL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_DEVICE_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_DEVICE_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IsDhcp4</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IsDhcp4</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2DestroyDhcp4</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4Config2DestroyDhcp4</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Dhcp4Event</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseEvent</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Dhcp4Event</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Dhcp4Event</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Dhcp4Event</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NumberOfChildren</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">NumberOfChildren</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementNumber">0</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">List</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">List</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ServiceBinding</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ServiceBinding</span>&nbsp; &nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">NumberOfChildren</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">NumberOfChildren</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NumberOfChildren</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">ChildHandleBuffer</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">ChildHandleBuffer</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetDestroyLinkList</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NetDestroyLinkList</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">List</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">List</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4DestroyChildEntryInHandleBuffer</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4DestroyChildEntryInHandleBuffer</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Context</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ArpHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ArpHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">ControllerHandle</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// The ARP protocol for the default interface is being uninstalled and all</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// The ARP protocol for the default interface is being uninstalled and all</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// its IP child handles should have been destroyed before. So, release the</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// its IP child handles should have been destroyed before. So, release the</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// default interface and route table, create a new one and mark it as not started.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// default interface and route table, create a new one and mark it as not started.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4CancelReceive</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4CancelReceive</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeRouteTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeRouteTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpIf</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpIf</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Controller</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Image</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">RouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateRouteTable</span> <span class="TextSegElementOperator">();</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">RouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CreateRouteTable</span> <span class="TextSegElementOperator">();</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">RouteTable</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">RouteTable</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4FreeInterface</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultInterface</span>&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">InsertHeadList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">InsertHeadList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interfaces</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">RouteTable</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">DefaultRouteTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">RouteTable</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4ReceiveFrame</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Ip4AccpetFrame</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4ReceiveFrame</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpIf</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">Ip4AccpetFrame</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_UNSTARTED</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_UNSTARTED</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IsListEmpty</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span> <span class="TextSegElementKeyword">else</span> <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IsListEmpty</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">State</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// OK, clean other resources then uninstall the service binding protocol.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">// OK, clean other resources then uninstall the service binding protocol.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CleanService</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">State</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">State</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NicHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ServiceBindingProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ServiceBinding</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4Config2ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ip4Config2</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Config2Instance</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">Ip4Config2</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">gIp4ControllerNameTable</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">gIp4ControllerNameTable</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">FreeUnicodeStringTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">gIp4ControllerNameTable</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">FreeUnicodeStringTable</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">gIp4ControllerNameTable</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4ControllerNameTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4ControllerNameTable</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Creates a child handle and installs a protocol.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Creates a child handle and installs a protocol.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The CreateChild() function installs a protocol on ChildHandle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The CreateChild() function installs a protocol on ChildHandle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; If ChildHandle is a pointer to NULL, then a new handle is created and returned in ChildHandle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; If ChildHandle is a pointer to NULL, then a new handle is created and returned in ChildHandle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; If ChildHandle is not a pointer to NULL, then the protocol installs on the existing ChildHandle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; If ChildHandle is not a pointer to NULL, then the protocol installs on the existing ChildHandle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; Pointer to the EFI_SERVICE_BINDING_PROTOCOL instance.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; Pointer to the EFI_SERVICE_BINDING_PROTOCOL instance.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ChildHandle Pointer to the handle of the child to create. If it is NULL,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ChildHandle Pointer to the handle of the child to create. If it is NULL,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
then a new handle is created. If it is a pointer to an existing UEFI 
handle,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
then a new handle is created. If it is a pointer to an existing UEFI 
handle,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
then the protocol is added to the existing UEFI handle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
then the protocol is added to the existing UEFI handle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCES&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The protocol was added to ChildHandle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCES&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The protocol was added to ChildHandle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_INVALID_PARAMETER ChildHandle is NULL.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_INVALID_PARAMETER ChildHandle is NULL.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp; There are not enough resources available to create</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_OUT_OF_RESOURCES&nbsp; There are not enough resources available to create</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the child</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the child</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The child handle was not created</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The child handle was not created</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4ServiceBindingCreateChild</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4ServiceBindingCreateChild</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">OUT</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">OUT</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_TPL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_TPL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">VOID</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">This</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ChildHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">This</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ChildHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">AllocatePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_PROTOCOL</span><span class="TextSegElementOperator">));</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">AllocatePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementKeyword">sizeof</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IP4_PROTOCOL</span><span class="TextSegElementOperator">));</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_OUT_OF_RESOURCES</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4InitProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Ip4InitProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Install Ip4 onto ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Install Ip4 onto ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Open the Managed Network protocol BY_CHILD.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Open the Managed Network protocol BY_CHILD.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Mnp</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Handle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_BY_CHILD_CONTROLLER</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_BY_CHILD_CONTROLLER</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Insert it into the service binding instance.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Insert it into the service binding instance.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InsertTailList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">InsertTailList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Children</span><span class="TextSegElementOperator">,</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span><span class="TextSegElementOperator">++;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span><span class="TextSegElementOperator">++;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4CleanProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">Ip4CleanProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">/**</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Destroys a child handle with a protocol installed on it.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; Destroys a child handle with a protocol installed on it.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The DestroyChild() function does the opposite of CreateChild(). It removes a protocol</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; The DestroyChild() function does the opposite of CreateChild(). It removes a protocol</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; that was installed by CreateChild() from ChildHandle. If the removed protocol is the</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; that was installed by CreateChild() from ChildHandle. If the removed protocol is the</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; last protocol on ChildHandle, then ChildHandle is destroyed.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; last protocol on ChildHandle, then ChildHandle is destroyed.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; Pointer to the EFI_SERVICE_BINDING_PROTOCOL instance.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; This&nbsp; &nbsp; &nbsp; &nbsp; Pointer to the EFI_SERVICE_BINDING_PROTOCOL instance.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ChildHandle Handle of the child to destroy</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @param&nbsp; ChildHandle Handle of the child to destroy</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCES&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The protocol was removed from ChildHandle.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_SUCCES&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The protocol was removed from ChildHandle.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_UNSUPPORTED&nbsp; &nbsp; &nbsp;&nbsp; ChildHandle does not support the protocol that is being removed.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_UNSUPPORTED&nbsp; &nbsp; &nbsp;&nbsp; ChildHandle does not support the protocol that is being removed.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_INVALID_PARAMETER Child handle is NULL.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_INVALID_PARAMETER Child handle is NULL.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ACCESS_DENIED&nbsp; &nbsp;&nbsp; The protocol could not be removed from the ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval EFI_ACCESS_DENIED&nbsp; &nbsp;&nbsp; The protocol could not be removed from the ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; because its services are being used.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp;&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; because its services are being used.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The child handle was not destroyed</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">&nbsp; @retval other&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The child handle was not destroyed</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementComment">**/</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFI_STATUS</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">EFIAPI</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4ServiceBindingDestroyChild</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">Ip4ServiceBindingDestroyChild</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_SERVICE_BINDING_PROTOCOL</span>&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IN</span> <span class="TextSegElementIdentifier">EFI_HANDLE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">)</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_STATUS</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_SERVICE</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_IP4_PROTOCOL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">*</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_TPL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">EFI_TPL</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">This</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ChildHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">((</span><span class="TextSegElementIdentifier">This</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">||</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">ChildHandle</span> <span class="TextSegElementOperator">==</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Retrieve the private context data structures</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Retrieve the private context data structures</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span>&nbsp;&nbsp; <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_SERVICE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">This</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">OpenProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">VOID</span> <span class="TextSegElementOperator">**)</span> <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_GET_PROTOCOL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">EFI_OPEN_PROTOCOL_GET_PROTOCOL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_UNSUPPORTED</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_UNSUPPORTED</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_INSTANCE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">IP4_INSTANCE_FROM_PROTOCOL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Service</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_INVALID_PARAMETER</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// A child can be destroyed more than once. For example,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// A child can be destroyed more than once. For example,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4DriverBindingStop will destroy all of its children.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Ip4DriverBindingStop will destroy all of its children.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// when UDP driver is being stopped, it will destroy all</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// when UDP driver is being stopped, it will destroy all</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// the IP child it opens.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// the IP child it opens.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">TRUE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Close the Managed Network protocol.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Close the Managed Network protocol.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">MnpChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiManagedNetworkProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Arp</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span> <span class="TextSegElementOperator">&amp;&amp;</span> <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Arp</span> <span class="TextSegElementOperator">!=</span> <span class="TextSegElementIdentifier">NULL</span><span class="TextSegElementOperator">)</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">CloseProtocol</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ArpHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Interface</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">ArpHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiArpProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">gIp4DriverBinding</span><span class="TextSegElementOperator">.</span><span class="TextSegElementIdentifier">DriverBindingHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">ChildHandle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Uninstall the IP4 protocol first. Many thing happens during</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// Uninstall the IP4 protocol first. Many thing happens during</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// this:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// this:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// 1. The consumer of the IP4 protocol will be stopped if it</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// 1. The consumer of the IP4 protocol will be stopped if it</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// opens the protocol BY_DRIVER. For eaxmple, if MNP driver is</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// opens the protocol BY_DRIVER. For eaxmple, if MNP driver is</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// stopped, IP driver's stop function will be called, and uninstall</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// stopped, IP driver's stop function will be called, and uninstall</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// EFI_IP4_PROTOCOL will trigger the UDP's stop function. This</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// EFI_IP4_PROTOCOL will trigger the UDP's stop function. This</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// makes it possible to create the network stack bottom up, and</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// makes it possible to create the network stack bottom up, and</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// stop it top down.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// stop it top down.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// 2. the upper layer will recycle the received packet. The recycle</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// 2. the upper layer will recycle the received packet. The recycle</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// event's TPL is higher than this function. The recycle events</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// event's TPL is higher than this function. The recycle events</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// will be called back before preceeding. If any packets not recycled,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// will be called back before preceeding. If any packets not recycled,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// that means there is a resource leak.</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">// that means there is a resource leak.</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementComment">//</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallProtocolInterface</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">UninstallProtocolInterface</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Ip4Proto</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">OldTpl</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RaiseTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">TPL_CALLBACK</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InDestroy</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">FALSE</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CleanProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">Status</span> <span class="TextSegElementOperator">=</span> <span class="TextSegElementIdentifier">Ip4CleanProtocol</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">if</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">EFI_ERROR</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">))</span> <span class="TextSegElementOperator">{</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">InstallMultipleProtocolInterfaces</span> <span class="TextSegElementOperator">(</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">ChildHandle</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">&amp;</span><span class="TextSegElementIdentifier">gEfiIp4ProtocolGuid</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">,</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">Ip4</span><span class="TextSegElementOperator">,</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementIdentifier">NULL</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;&nbsp;&nbsp; <span class="TextSegElementKeyword">goto</span> <span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementOperator">}</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">RemoveEntryList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">RemoveEntryList</span> <span class="TextSegElementOperator">(&amp;</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">Link</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span><span class="TextSegElementOperator">--;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">IpSb</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">NumChildren</span><span class="TextSegElementOperator">--;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">FreePool</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">IpInstance</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">EFI_SUCCESS</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementIdentifier">ON_ERROR</span><span class="TextSegElementOperator">:</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementIdentifier">gBS</span><span class="TextSegElementOperator">-&gt;</span><span class="TextSegElementIdentifier">RestoreTPL</span> <span class="TextSegElementOperator">(</span><span class="TextSegElementIdentifier">OldTpl</span><span class="TextSegElementOperator">);</span></td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp;</td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp;</td>
</tr>
<tr class="SectionMiddle">
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame">&nbsp; <span class="TextSegElementKeyword">return</span> <span class="TextSegElementIdentifier">Status</span><span class="TextSegElementOperator">;</span></td>
</tr>
<tr class="SectionEnd">
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
<td class="AlignCenter">&nbsp;</td>
<td class="TextItemSame"><span class="TextSegElementOperator">}</span></td>
</tr>
</tbody></table>
<br>


</body></html>